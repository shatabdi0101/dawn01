{{ 'customer.css' | asset_url | stylesheet_tag }}

{%- style -%}
  .section-{{ section.id }}-padding {
    padding-top: {{ section.settings.padding_top | times: 0.75 | round: 0 }}px;
    padding-bottom: {{ section.settings.padding_bottom | times: 0.75 | round: 0 }}px;
    display: flex !important;
    justify-content: space-between !important;
    align-items: center !important;
  }

  @media screen and (min-width: 750px) {
    .section-{{ section.id }}-padding {
      padding-top: {{ section.settings.padding_top }}px;
      padding-bottom: {{ section.settings.padding_bottom }}px;
    }
  }
  .section {
    display: flex;
    flex-direction: column;
  }
  .section1 {
    display: flex;
    flex-direction: column;
    width:70%;
  }
  .form-row {
    margin-bottom: 10px;
  }
  
  .input-group {
    display: inline-block;
    vertical-align: top;
    margin-right: 20px;
  }
  
  label {
    display: block;
  }
  
  input {
    display: block;
    width: 200px;
  }
  .profile {
    position: relative;
  }
  .edit-container {
    position: absolute;
    top: 0;
    right: 0;
  }
  
  #edit_button {
    padding: 5px 10px;
    cursor: pointer;
  }
  .info-field {
    margin-bottom: 10px;
  }
  
  .info-field b {
    display: block;
    font-weight: bold;
  }
  
  .info-value {
    padding: 5px;
  }
  .group {
    display: inline-block;
    vertical-align: top;
    margin-right: 120px;
  }
{%- endstyle -%}

<div class="customer account section-{{ section.id }}-padding">
  <div class="section">
      <div>
        <h3><b>{{ customer.name }}</b>
          <p>{{ customer.email }}</p>
        </h3>
      </div>
       <div class="profile" id="profile"><a style="text-decoration: none;"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" fill="none" viewBox="0 0 18 19">
              <path fill-rule="evenodd" clip-rule="evenodd" d="M6 4.5a3 3 0 116 0 3 3 0 01-6 0zm3-4a4 4 0 100 8 4 4 0 000-8zm5.58 12.15c1.12.82 1.83 2.24 1.91 4.85H1.51c.08-2.6.79-4.03 1.9-4.85C4.66 11.75 6.5 11.5 9 11.5s4.35.26 5.58 1.15zM9 10.5c-2.5 0-4.65.24-6.17 1.35C1.27 12.98.5 14.93.5 18v.5h17V18c0-3.07-.77-5.02-2.33-6.15-1.52-1.1-3.67-1.35-6.17-1.35z" fill="currentColor">
            </svg>My Profile</a>
       </div>
       <div class="ord" id="ord"><a style="text-decoration: none;"><svg xmlns="http://www.w3.org/2000/svg" width="27" height="27" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><path d="M6 2L3 6v14c0 1.1.9 2 2 2h14a2 2 0 0 0 2-2V6l-3-4H6zM3.8 6h16.4M16 10a4 4 0 1 1-8 0"/></svg>Orders</a>
       </div>
       <div>
           <a href="{{ routes.account_addresses_url }}" style="text-decoration: none;"><svg xmlns="http://www.w3.org/2000/svg" width="25" height="25" viewBox="0 0 22 22" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"></path><polyline points="9 22 9 12 15 12 15 22"></polyline></svg>Addresses</a>
       </div>
       <div><a style="text-decoration: none;"><svg xmlns="http://www.w3.org/2000/svg" width="27" height="27" viewBox="0 0 23 23" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"></path></svg>Wishlist</a></div>
       <div><a href="/account/login#recover" style="text-decoration: none;"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-key" viewBox="0 0 16 16">
            <path d="M0 8a4 4 0 0 1 7.465-2H14a.5.5 0 0 1 .354.146l1.5 1.5a.5.5 0 0 1 0 .708l-1.5 1.5a.5.5 0 0 1-.708 0L13 9.207l-.646.647a.5.5 0 0 1-.708 0L11 9.207l-.646.647a.5.5 0 0 1-.708 0L9 9.207l-.646.647A.5.5 0 0 1 8 10h-.535A4 4 0 0 1 0 8m4-3a3 3 0 1 0 2.712 4.285A.5.5 0 0 1 7.163 9h.63l.853-.854a.5.5 0 0 1 .708 0l.646.647.646-.647a.5.5 0 0 1 .708 0l.646.647.646-.647a.5.5 0 0 1 .708 0l.646.647.793-.793-1-1h-6.63a.5.5 0 0 1-.451-.285A3 3 0 0 0 4 5"/>
          </svg>Change Password</a>
       </div>
       <div><a href="{{ routes.account_logout_url }}" style="text-decoration: none;">
            <svg xmlns="http://www.w3.org/2000/svg" width="27" height="27" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><path d="M16 17l5-5-5-5M19.8 12H9M10 3H4v18h6"/></svg>Logout
          </a>
       </div>
  </div>
  <div class="section1">
      <div class="ord_details" id="ord_details" style="display: none;">
            {% paginate customer.orders by 20 %}
              {%- if customer.orders.size > 0 -%}
                <table role="table" class="order-history">
                  <caption class="visually-hidden">
                    {{ 'customer.orders.title' | t }}
                  </caption>
                  <thead role="rowgroup">
                    <tr role="row">
                      <th id="ColumnOrder" scope="col" role="columnheader">{{ 'customer.orders.order_number' | t }}</th>
                      <th id="ColumnDate" scope="col" role="columnheader">{{ 'customer.orders.date' | t }}</th>
                      <th id="ColumnPayment" scope="col" role="columnheader">{{ 'customer.orders.payment_status' | t }}</th>
                      <th id="ColumnFulfillment" scope="col" role="columnheader">
                        {{ 'customer.orders.fulfillment_status' | t }}
                      </th>
                      <th id="ColumnTotal" scope="col" role="columnheader">{{ 'customer.orders.total' | t }}</th>
                    </tr>
                  </thead>
                  <tbody role="rowgroup">
                    {%- for order in customer.orders -%}
                      <tr role="row">
                        <td
                          id="RowOrder"
                          role="cell"
                          headers="ColumnOrder"
                          data-label="{{ 'customer.orders.order_number' | t }}"
                        >
                          <a
                            href="{{ order.customer_url }}"
                            aria-label="{{ 'customer.orders.order_number_link' | t: number: order.name }}"
                          >
                            {{ order.name }}
                          </a>
                        </td>
                        <td headers="RowOrder ColumnDate" role="cell" data-label="{{ 'customer.orders.date' | t }}">
                          {{ order.created_at | time_tag: format: 'date' }}
                        </td>
                        <td
                          headers="RowOrder ColumnPayment"
                          role="cell"
                          data-label="{{ 'customer.orders.payment_status' | t }}"
                        >
                          {{ order.financial_status_label }}
                        </td>
                        <td
                          headers="RowOrder ColumnFulfillment"
                          role="cell"
                          data-label="{{ 'customer.orders.fulfillment_status' | t }}"
                        >
                          {{ order.fulfillment_status_label }}
                        </td>
                        <td headers="RowOrder ColumnTotal" role="cell" data-label="{{ 'customer.orders.total' | t }}">
                          {{ order.total_net_amount | money_with_currency }}
                        </td>
                      </tr>
                    {%- endfor -%}
                  </tbody>
                </table>
              {%- else -%}
                <p>{{ 'customer.orders.none' | t }}</p>
              {%- endif -%}
      
              {%- if paginate.pages > 1 -%}
                {%- if paginate.parts.size > 0 -%}
                  <nav class="pagination" role="navigation" aria-label="{{ 'general.pagination.label' | t }}">
                    <ul role="list">
                      {%- if paginate.previous -%}
                        <li>
                          <a href="{{ paginate.previous.url }}" aria-label="{{ 'general.pagination.previous' | t }}">
                            <svg aria-hidden="true" focusable="false" viewBox="0 0 10 6">
                              <path fill-rule="evenodd" clip-rule="evenodd" d="M9.354.646a.5.5 0 00-.708 0L5 4.293 1.354.646a.5.5 0 00-.708.708l4 4a.5.5 0 00.708 0l4-4a.5.5 0 000-.708z" fill="currentColor">
                            </svg>
                          </a>
                        </li>
                      {%- endif -%}
      
                      {%- for part in paginate.parts -%}
                        <li>
                          {%- if part.is_link -%}
                            <a href="{{ part.url }}" aria-label="{{ 'general.pagination.page' | t: number: part.title }}">
                              {{- part.title -}}
                            </a>
                          {%- else -%}
                            {%- if part.title == paginate.current_page -%}
                              <span aria-current="page" aria-label="{{ 'general.pagination.page' | t: number: part.title }}">
                                {{- part.title -}}
                              </span>
                            {%- else -%}
                              <span>{{ part.title }}</span>
                            {%- endif -%}
                          {%- endif -%}
                        </li>
                      {%- endfor -%}
      
                      {%- if paginate.next -%}
                        <li>
                          <a href="{{ paginate.next.url }}" aria-label="{{ 'general.pagination.next' | t }}">
                            <svg aria-hidden="true" focusable="false" viewBox="0 0 10 6">
                              <path fill-rule="evenodd" clip-rule="evenodd" d="M9.354.646a.5.5 0 00-.708 0L5 4.293 1.354.646a.5.5 0 00-.708.708l4 4a.5.5 0 00.708 0l4-4a.5.5 0 000-.708z" fill="currentColor">
                            </svg>
                          </a>
                        </li>
                      {%- endif -%}
                    </ul>
                  </nav>
                {%- endif -%}
              {%- endif -%}
            {% endpaginate %}
        </div>
        <div class="profile_details" id="profile_details">
          <div class= "info-field">
            <div class="group">
                <b>Total Spent</b>
                <div class="info-value"><span>$0.00</span></div>
            </div>
            <div class="group">
                <b>All Orders</b>
                <div class="info-value"><span>$0.00</span></div>
            </div>
            <div class="group">
                <b>Addresses</b>
                <div class="info-value"><span>$0.00</span></div>
            </div>
          </div>
          <div class="profile">
            <h3><b>My Profile</b></h3>
            <div class="edit-container">
              <div id="edit_button"><a style="text-decoration:none;"><svg xmlns="http://www.w3.org/2000/svg" width="27" height="27" viewBox="0 0 25 25" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><path d="M20 14.66V20a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h5.34"></path><polygon points="18 2 22 6 12 16 8 16 8 12 18 2"></polygon></svg>
                Edit</a></div>
            </div>
            <div class="info" id="info">
               <div class="info-field">
                  <div class="group">
                    <b>First Name</b>
                    <div class="info-value"><span id="info_first_name">{{ customer.first_name }}</span></div>
                  </div>
                  <div class="group">
                    <b>Last Name</b>
                    <div class="info-value"><span id="info_last_name">{{ customer.last_name }}</span></div>
                  </div>
                </div>
                <div class="info-field">
                  <b>Email address</b>
                  <div class="info-value"><span id="info_email">{{ customer.email }}</span></div>
                </div>
            </div>
            <form id="profile_form" style="display: none;">
              <div class="form-row">
                <div class="input-group">
                  <label for="first_name">First Name</label>
                  <input type="text" id="first_name" name="first_name" value="{{ customer.first_name }}">
                </div>
                <div class="input-group">
                  <label for="last_name">Last Name</label>
                  <input type="text" id="last_name" name="last_name" value="{{ customer.last_name }}">
                </div>
              </div>
              <div class="form-row">
                <label for="email">Email address</label>
                <input type="email" id="email" name="email" value="{{ customer.email }}">
              </div>
              <button class="cancel" id="cancel">CANCEL</button>
              <button class="sub" type="submit">SUBMIT</button>
            </form>
         </div>
      </div>
  </div>
</div>
<script>
document.addEventListener("DOMContentLoaded", function() {
  var ord = document.getElementById("ord");
  var ordDetails = document.getElementById("ord_details");
  var profile = document.getElementById("profile");
  var profileDetails = document.getElementById("profile_details");
  var editButton = document.getElementById("edit_button");
  var form = document.getElementById("profile_form");
  var accountInfo = document.getElementById("info");
  var cancelButton = document.getElementById("cancel");
  
  ord.addEventListener("click", function() {
    if (ordDetails.style.display === "none") {
      ordDetails.style.display = "block";
      profileDetails.style.display = "none";
    } else {
      ordDetails.style.display = "none";
    }
  });
  profile.addEventListener("click", function() {
    if (profileDetails.style.display === "none") {
      profileDetails.style.display = "block";
      ordDetails.style.display = "none";
    } else {
      profileDetails.style.display = "none";
    }
  });

  editButton.addEventListener("click", function() {
    if (form.style.display === "none") {
      form.style.display = "block";
      editButton.style.display = "none";
      info.style.display = "none";
    } else {
      form.style.display = "none";
    }
  });

  cancelButton.addEventListener("click", function() {
    accountInfo.style.display ="block";
    form.style.display = "none";
    editButton.style.display = "block";
  });

  form.addEventListener("submit", function(event) {
    var firstName = document.getElementById("first_name").value;
    var lastName = document.getElementById("last_name").value;
    var email = document.getElementById("email").value;
    
    customer.first_name = firstName;
    customer.last_name = lastName;
    customer.email = email;
    
    form.style.display = "none";
    info.style.display = "block";
  });

});
</script>
{% schema %}
{
  "name": "t:sections.main-account.name",
  "settings": [
    {
      "type": "header",
      "content": "t:sections.all.padding.section_padding_heading"
    },
    {
      "type": "range",
      "id": "padding_top",
      "min": 0,
      "max": 100,
      "step": 4,
      "unit": "px",
      "label": "t:sections.all.padding.padding_top",
      "default": 36
    },
    {
      "type": "range",
      "id": "padding_bottom",
      "min": 0,
      "max": 100,
      "step": 4,
      "unit": "px",
      "label": "t:sections.all.padding.padding_bottom",
      "default": 36
    }
  ]
}
{% endschema %}
